(function(){ if(typeof window.AdGlare == 'undefined') { window.AdGlare = { _head: document.head || document.getElementsByTagName('head')[0] || document.documentElement, _zonerefresh: [], _winID: Math.round(Math.random()*100000), _crIDsLoaded: [], _queue: [], _queueStatus: 0, _queueTimer: null, getCookie: function(cname) { try { var name = cname + '='; var ca = document.cookie.split(';'); for(var i = 0; i < ca.length; i++) { var c = ca[i]; while(c.charAt(0) == ' ') c = c.substring(1); if(c.indexOf(name) == 0) return c.substring(name.length, c.length); } } catch(e) {} return ''; }, getCookieMacros: function() { try { if(!window.AdGlareBase64) return ''; var cookiemacros_keys = ''; if(cookiemacros_keys=='#' || cookiemacros_keys=='') return ''; var keys = cookiemacros_keys.split('#'); var kws = {}; var atleastone = false; for(i in keys) { if(keys[i]=='') continue; var l = AdGlareBase64.decode(keys[i]); var c = AdGlare.getCookie(l); if(c!='') { if(typeof c == 'number' || typeof c == 'boolean') {} else if(typeof c == 'string') {c = c.substring(0,100);} else continue; kws[l] = c+''; atleastone = true; } } if(atleastone==false) return ''; return(encodeURIComponent(AdGlareBase64.encode(JSON.stringify(kws)))); } catch(e) {} return ''; }, getKVPairs: function() { try { if(!window.AdGlareBase64) return ''; var keyvaluetargeting_keys = ''; if(keyvaluetargeting_keys=='#' || keyvaluetargeting_keys=='') return ''; var keys = keyvaluetargeting_keys.split('#'); var kws = {}; var atleastone = false; for(i in keys) { if(keys[i]=='') continue; var f = null; var l = AdGlareBase64.decode(keys[i]); var c = AdGlare.getCookie(l); var v = window[l]; if(v!==undefined) f = v; else if(c!='') f = c; if(f!=null) { if(typeof f == 'number' || typeof f == 'boolean') {} else if(typeof f == 'string') {f = f.toLowerCase().substring(0,40);} else continue; kws[l] = f+''; atleastone = true; } } if(atleastone==false) return ''; return(encodeURIComponent(AdGlareBase64.encode(JSON.stringify(kws)))); } catch(e) {} return ''; }, loadJS: function(url) { var bc = Math.round(Math.random()*10) + 3; var r = ''; try {r = encodeURIComponent( top.location.href || window.location.href || document.location.href );} catch(e) {r = 'https%3A%2F%2Fboards.4chan.org%2F';} var screen = ''; try {screen = window.screen.width + 'x' + window.screen.height;} catch(e) {} var availscreen = ''; try {availscreen = (window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth) + 'x' + (window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight);} catch(e) {} var framed = AdGlare.inIframe() ? 1 : 0; var caps = ''; if(typeof window.AdGlareCaps != 'undefined') caps = AdGlareCaps.getCaps(); var add = '&bc=' + bc + '&winID=' + AdGlare._winID + '&screen=' + screen + '&availscreen=' + availscreen + '&framed=' + framed + '&vb=' + AdGlare.VBMeasurable() + '&crIDsLoaded=' + AdGlare._crIDsLoaded.join('-') + '&referer=' + r + '&caps=' + caps + '&kvpairs=' + AdGlare.getKVPairs()+'&cm='+AdGlare.getCookieMacros(); var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = url + add; AdGlare._head.appendChild(s); }, loadQueue: function(url) { AdGlare._queue.push(url); AdGlare.continueQueue(); }, nextQueue: function() { window.clearTimeout(AdGlare._queueTimer); AdGlare._queueStatus = 0; AdGlare.continueQueue(); }, continueQueue: function() { if(AdGlare._queueStatus != 0 || AdGlare._queue.length == 0) return; AdGlare._queueStatus = 1; AdGlare.loadJS(AdGlare._queue.shift()); /*AdGlare._queueTimer = window.setTimeout(function(){ AdGlare.nextQueue(); },1000);*/ }, addCSS: function(css) { if(css=='') return; var c = document.createElement('style'); c.type = 'text/css'; c.innerHTML = css; AdGlare._head.appendChild(c); }, loadPixel: function (url, elem) { try { var i = document.createElement(elem); i.width = '1'; i.height = '1'; i.style.display = 'none'; i.src = url; AdGlare._head.appendChild(i); } catch(e) {} }, loadTrackingPixels: function(t) { try { var i; for(i in t) { this.loadPixel(t[i].url, t[i].elem); } } catch(e) {} }, loadAdGlareCallback: function(callbackData) { if(!callbackData) return; try { if(window[callbackData.functionName]) { window[callbackData.functionName](callbackData.data); } } catch(e) {} }, setHTML: function(html,zID) { var obj = document.getElementById('zone'+zID); if(!obj) return; obj.innerHTML = html; }, appendToContainer: function(id,html) { var obj = document.getElementById(id); if(!obj) return; obj.innerHTML = ''; obj.appendChild(html); }, refreshZone: function(url,zID,timeout,max) { setTimeout(function(){ AdGlare._zonerefresh[zID] = (AdGlare._zonerefresh[zID]+1) || 1; if(AdGlare._zonerefresh[zID] > max) return; AdGlare.loadJS(url); }, timeout); }, getIframeDoc: function(id) { var o = document.getElementById(id); if(!o) return false; var d = o.contentDocument ? o.contentWindow.document : o.contentDocument || o.document; return d; }, writeToIframe: function(id,content) { var d = this.getIframeDoc(id); if(!d) return false; d.open(); d.write(content); d.close(); return true; }, hideElement: function(id) { try { for(i=0; i<3; i++) { if(i==0) var o = document.getElementById(id); if(i==1) var o = parent.document.getElementById(id); if(i==2) var o = parent.parent.document.getElementById(id); if(!o) continue; o.style.display = 'none'; if(o.parentNode) o.parentNode.removeChild(o); } } catch(e) {} }, inIframe: function() { try { return window.self !== window.top; } catch (e) { return true; } }, VBMeasurable: function() { var a = true; var b = ((document.visibilityState) ? true : false); var c = ((this.inIframe()) ? false : true); return ((a && b && c) ? 1 : 0); }, CL_timers: [], CL_started: [], CL_lastActiveElementID: '', CL_urls: [], CL_done: [], CLInit: function(ifrmID,token,redirect_url,autoClickTracking) { AdGlare.CL_urls[token] = redirect_url; AdGlare.CL_started[token] = Date.now(); AdGlare.CL_timers[token] = window.setInterval(function(){AdGlare.CLMeasure(ifrmID,token,autoClickTracking);},1000); }, CLMeasure: function(ifrmID,token,autoClickTracking) { try { var elem = document.activeElement; if(elem && elem.tagName == 'IFRAME'){ if(elem.id == ifrmID) { var diff = ((parseInt(Date.now()) - parseInt(AdGlare.CL_started[token])) / 1000); if(diff>5) { if(AdGlare.CL_lastActiveElementID != elem.id) { if(!AdGlare.CL_done[token]) { AdGlare.CL_done[token] = 1; window.clearInterval(AdGlare.CL_timers[token]); if(autoClickTracking==true) AdGlare.loadPixel(AdGlare.CL_urls[token]+'&log=1','img'); AdGlare.CLCallbackFire(token); } } } else { if(parent) parent.focus(); } } } AdGlare.CL_lastActiveElementID = elem.id || ''; } catch(e) {} }, CLCallback_clickPixels: [], CLCallback_done: [], CLSetClickPixels: function(token,clickPixels) { if(clickPixels=='') return; AdGlare.CLCallback_clickPixels[token] = clickPixels; }, CLCallbackFire: function(token) { if(!AdGlare.CLCallback_done[token]) { AdGlare.CLCallback_done[token] = 1; if(AdGlare.CLCallback_clickPixels[token]!==undefined && AdGlare.CLCallback_clickPixels[token]!='') { try { for(i in AdGlare.CLCallback_clickPixels[token]) { AdGlare.loadPixel(AdGlare.CLCallback_clickPixels[token][i].url, AdGlare.CLCallback_clickPixels[token][i].elem); } } catch(e) {} } } } }}})();
(function(){ if(typeof window.AdGlareBase64 == 'undefined') { window.AdGlareBase64 = { _keyStr : "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", encode: function(input) { var output = ""; var chr1, chr2, chr3, enc1, enc2, enc3, enc4; var i = 0; try { input = this._utf8_encode(input); } catch(e) { console.log('AG Error: '+e); console.log(e); } while (i < input.length) { chr1 = input.charCodeAt(i++); chr2 = input.charCodeAt(i++); chr3 = input.charCodeAt(i++); enc1 = chr1 >> 2; enc2 = ((chr1 & 3) << 4) | (chr2 >> 4); enc3 = ((chr2 & 15) << 2) | (chr3 >> 6); enc4 = chr3 & 63; if (isNaN(chr2)) { enc3 = enc4 = 64; } else if (isNaN(chr3)) { enc4 = 64; } output += this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) + this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4); } return output; }, decode: function(input) { var output = ""; var chr1, chr2, chr3; var enc1, enc2, enc3, enc4; var i = 0; input = input.replace(/[^A-Za-z0-9\+\/\=]/g, ""); while (i < input.length) { enc1 = this._keyStr.indexOf(input.charAt(i++)); enc2 = this._keyStr.indexOf(input.charAt(i++)); enc3 = this._keyStr.indexOf(input.charAt(i++)); enc4 = this._keyStr.indexOf(input.charAt(i++)); chr1 = (enc1 << 2) | (enc2 >> 4); chr2 = ((enc2 & 15) << 4) | (enc3 >> 2); chr3 = ((enc3 & 3) << 6) | enc4; output += String.fromCharCode(chr1); if (enc3 != 64) { output += String.fromCharCode(chr2); } if (enc4 != 64) { output += String.fromCharCode(chr3); } } try { output = this._utf8_decode(output); } catch(e) { console.log('AG Error: '+e); console.log(e); } return output; }, _utf8_encode: function(string) { return AdGlareBase64.AdGlareUnescape(encodeURIComponent(string)); }, _utf8_decode: function(utftext) { return decodeURIComponent(AdGlareBase64.AdGlareEscape(utftext)); }, AdGlareEscapeHash: function(input) { var ret = AdGlareBase64.AdGlareEscapeHash[input]; if(!ret) { if(input.length - 1) { ret = String.fromCharCode(parseInt(input.substring(input.length - 3 ? 2 : 1),16)); } else { var code = input.charCodeAt(0); ret = code < 256 ? "%" + (0 + code.toString(16)).slice(-2).toUpperCase() : "%u" + ("000" + code.toString(16)).slice(-4).toUpperCase(); } AdGlareBase64.AdGlareEscapeHash[ret] = input; AdGlareBase64.AdGlareEscapeHash[input] = ret; } return ret; }, AdGlareEscape: function(str) { return str.toString().replace(/[^\w @\*\-\+\.\/]/g, function(aChar) { return AdGlareBase64.AdGlareEscapeHash(aChar); }); }, AdGlareUnescape: function(str) { return str.toString().replace(/%(u[\da-f]{4}|[\da-f]{2})/gi, function(seq) { return AdGlareBase64.AdGlareEscapeHash(seq); }); } }}})();
(function(){ if(typeof window.AdGlareCaps == 'undefined') { window.AdGlareCaps = { now: Math.round(new Date().getTime()/1000), storageSupport: function() { if(typeof(Storage)==='undefined') return false; try { localStorage.setItem('ag_storageSupport',1); if(localStorage.getItem('ag_storageSupport')==1) return true; } catch(e) {} return false; }, getCaps: function() { var caps = '-'; if(this.storageSupport() === false) return caps; try { var agcaps = JSON.parse(localStorage.getItem('agcaps') || JSON.stringify({})); var i; var a = 0; for(i in agcaps) { if(agcaps[i]['exp'] === undefined) delete agcaps[i]; else if(this.now > parseInt(agcaps[i]['exp'])) delete agcaps[i]; else if(agcaps[i]['cur'] >= agcaps[i]['max']) { a++; if(a<=100) caps += agcaps[i]['cID']+'-'; } } localStorage.setItem('agcaps',JSON.stringify(agcaps)); } catch(e) {} return caps; }, increaseCap: function(cID,sec,max) { if(this.storageSupport() === false) return false; try { var agcaps = JSON.parse(localStorage.getItem('agcaps') || JSON.stringify({})); var name = 'cID_'+cID+'_'+sec; if(agcaps[name] === undefined) { agcaps[name] = {}; agcaps[name]['exp'] = (this.now + sec); agcaps[name]['cID'] = cID; agcaps[name]['sec'] = sec; agcaps[name]['max'] = max; agcaps[name]['cur'] = 1; } else { agcaps[name]['cur'] = parseInt(agcaps[name]['cur']) + 1; } localStorage.setItem('agcaps',JSON.stringify(agcaps)); } catch(e) {} } }}})();
AdGlare._crIDsLoaded.push(822593214);
AdGlare.nextQueue();
var AdGlareSettings_350700 = { zID: 688619547, width: 728, height: 90, impURL: "//utraffic.engine.adglare.net/imp?data=eyJ0cyI6IjIwMTgtMDktMDIgMjA6MzE6NDYiLCJ0aW1lIjoxNTM1ODg3OTA2LCJ6SUQiOjY4ODYxOTU0NywiY0lEIjoiMTAzNDkyNjI1IiwiY3JJRCI6IjgyMjU5MzIxNCIsImFkdHlwZSI6ImltYWdlYmFubmVyIiwiYWRmb3JtYXQiOiJpYWJfNzI4XzkwIiwiZG9tYWluIjoiYm9hcmRzLjRjaGFuLm9yZyIsImltcHRva2VuIjoiOGE3NjNjZTIiLCJzc2wiOiJ5ZXMiLCJjb29yZCI6Ii0zNy45IzE0NS4xIiwiX3JuZCI6OTczMDN9-1535887906-e8188889", isThirdParty: true, autoImpressionTracking: true, autoClickTracking: true, isSync: false, alwaysOnScreen: false, alwaysOnScreenData: '', animationType: 'none', allowClose: false, closeButtonURL: '//utraffic.cdn.adglare.net/inventory/close_button.png', isBase64Encoded: true, zoneHTML: "PGRpdiBpZD0icmNqc2xvYWRfYzUzOGU0Ij48L2Rpdj4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgooZnVuY3Rpb24oKSB7CnZhciByZWZlcmVyPSIiO3RyeXtpZihyZWZlcmVyPWRvY3VtZW50LnJlZmVycmVyLCJ1bmRlZmluZWQiPT10eXBlb2YgcmVmZXJlcnx8IiI9PXJlZmVyZXIpdGhyb3cidW5kZWZpbmVkIn1jYXRjaChleGNlcHRpb24pe3JlZmVyZXI9ZG9jdW1lbnQubG9jYXRpb24uaHJlZiwoIiI9PXJlZmVyZXJ8fCJ1bmRlZmluZWQiPT10eXBlb2YgcmVmZXJlcikmJihyZWZlcmVyPWRvY3VtZW50LlVSTCl9cmVmZXJlcj1yZWZlcmVyLnN1YnN0cigwLDcwMCk7CnZhciByY2RzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJjanNsb2FkX2M1MzhlNCIpOwp2YXIgcmNlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOwpyY2VsLmlkID0gJ3JjXycgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwKTsKcmNlbC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7CnJjZWwuc3JjID0gIi8vdHJlbmRzLnJldmNvbnRlbnQuY29tL3NlcnZlLmpzLnBocD93PTk4MTc4JnQ9IityY2VsLmlkKyImYz0iKyhuZXcgRGF0ZSgpKS5nZXRUaW1lKCkrIiZ3aWR0aD0iKyh3aW5kb3cub3V0ZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpKyImcmVmZXJlcj0iK3JlZmVyZXI7CnJjZWwuYXN5bmMgPSB0cnVlOwpyY2RzLmFwcGVuZENoaWxkKHJjZWwpOwp9KSgpOwo8L3NjcmlwdD4=", autoRefresh: { interval: 0, max: 0, loc: '//utraffic.engine.adglare.net/?688619547&lastcrID=822593214' }, trackingPixels: [], clickPixels: [], viewability: { measurable: true, token: 'eyJ0cyI6IjIwMTgtMDktMDIgMjA6MzE6NDYiLCJ0aW1lIjoxNTM1ODg3OTA2LCJ6SUQiOjY4ODYxOTU0NywiY0lEIjoiMTAzNDkyNjI1IiwiY3JJRCI6IjgyMjU5MzIxNCIsImFkdHlwZSI6ImltYWdlYmFubmVyIiwiYWRmb3JtYXQiOiJpYWJfNzI4XzkwIiwiZG9tYWluIjoiYm9hcmRzLjRjaGFuLm9yZyIsInNzbCI6InllcyIsIl9ybmQiOjY3NjY3fQ..-1535887906-2377c3fb' }, click: { redirect_url: '//utraffic.engine.adglare.net/c?cID=103492625&crID=822593214&zID=688619547&domain=boards.4chan.org&imptoken=8a763ce2&cm=&referer=https%3A%2F%2Fboards.4chan.org%2Fsci%2Fthread%2F9973502&h=abwnnbu-1535887906&tk=183984b5&u=', token: '181213', clcturl: '' }, freqcaps: [], };
var AdGlareImageBanner_350700 = { settings: {}, ifrm_id: 'ag'+Math.round((Math.random()*10000000)), init: function(_settings, tries) { if(!document.getElementById('zone'+_settings.zID) && !_settings.isSync) { tries = tries || 1; var timeout = 10; if(tries>100) timeout = 100; if(tries>190) timeout = 1000; window.setTimeout(function(){ AdGlareImageBanner_350700.init(_settings,tries+1); },timeout); return; } this.settings = _settings; this.show(); }, close: function() { var el = document.getElementById('zone'+this.settings.zID); if(!el) return; el.innerHTML = ''; }, show: function() { var targetzID = this.settings.zID; if(this.settings.alwaysOnScreen && !this.settings.isSync) { AdGlare.setHTML("<span id=zone"+this.settings.zID+"_alwaysonscreen style='display:inline-block; overflow:hidden;'></span>",this.settings.zID); targetzID = this.settings.zID+'_alwaysonscreen'; AdGlareAlwaysOnScreen.alwaysOnScreen(this.settings.zID, this.settings.alwaysOnScreenData, 'AdGlareImageBanner_350700'); } this.settings.zoneHTML = this.settings.zoneHTML.replace(/<tpircs/g,'<script').replace(/tpircs>/g,'script>'); if(this.settings.isBase64Encoded) this.settings.zoneHTML = AdGlareBase64.decode(this.settings.zoneHTML); if(this.settings.isThirdParty) { if(this.settings.isSync) { document.write('<span id=zone'+this.settings.zID+'>'+this.settings.zoneHTML+'</span>'); } else { ifrm = document.createElement('iframe'); ifrm.id = this.ifrm_id; ifrm.src = 'about:blank'; ifrm.setAttribute('frameborder', '0'); ifrm.setAttribute('marginheight', '0'); ifrm.setAttribute('marginwidth', '0'); ifrm.setAttribute('scrolling', 'no'); ifrm.style.width = this.settings.width+'px'; ifrm.style.height = this.settings.height+'px'; ifrm.style.maxWidth = '100%'; ifrm.style.background = 'transparent'; ifrm.style.overflow = 'hidden'; ifrm.style.margin = '0px'; ifrm.style.border = 'none'; ifrm.style.verticalAlign = 'middle'; AdGlare.appendToContainer('zone'+targetzID,ifrm); var html_content = " <!doctype html><html style='margin:0px; padding:0px;'><head><title>-</title><style> .animated { -webkit-animation-fill-mode: both; -moz-animation-fill-mode: both; -ms-animation-fill-mode: both; -o-animation-fill-mode: both; animation-fill-mode: both; -webkit-animation-duration: 0s; -moz-animation-duration: 0s; -ms-animation-duration: 0s; -o-animation-duration: 0s; animation-duration: 0s; } </style></head><body id=docbody style='margin:0px; padding:0px; animation-delay:100ms;' class='animated "+this.settings.animationType+"'> "+this.settings.zoneHTML+" "+((this.settings.allowClose?"<img id=img_close_"+this.settings.zID+" onclick='parent.AdGlareImageBanner_350700.close();' style='cursor:pointer; z-index:2147483647; position:absolute; top:0px; right:0px; height:28px; width:28px;' src='"+this.settings.closeButtonURL+"'>":""))+" <script> window.setTimeout(function(){ document.getElementById('docbody').className = ''; },1000); </script></body></html> "; AdGlare.writeToIframe(this.ifrm_id,html_content); try { this.iFrameResize(); if(window.addEventListener) window.addEventListener('resize', this.iFrameResize, false); else if(window.attachEvent) window.attachEvent('onresize', this.iFrameResize); AdGlare.CLInit(this.ifrm_id,this.settings.click.token,this.settings.click.redirect_url,this.settings.autoClickTracking); } catch(e) {}; } } else { if(this.settings.isSync) document.write('<span id=zone'+this.settings.zID+'></span>'); AdGlare.setHTML(this.settings.zoneHTML,targetzID); } if(this.settings.viewability.measurable==true) { var obj = document.getElementById('zone'+this.settings.zID); if(obj) obj.style.display = 'block'; if(typeof window.AdGlareVis != 'undefined') AdGlareVis.VBInit(this.settings.zID, this.settings.viewability.token); } if(this.settings.autoImpressionTracking!==false) this.fireImpression(); AdGlare.loadTrackingPixels(this.settings.trackingPixels); AdGlare.CLSetClickPixels(this.settings.click.token, this.settings.clickPixels); AdGlare.loadAdGlareCallback(this.settings.callbackData); if(this.settings.freqcaps) { var i; for(i in this.settings.freqcaps) { var c = this.settings.freqcaps[i]; AdGlareCaps.increaseCap(c['cID'],c['sec'],c['max']); } } if(this.settings.autoRefresh.interval > 0 && !this.settings.isSync) { AdGlare.refreshZone(this.settings.autoRefresh.loc,this.settings.zID,this.settings.autoRefresh.interval,this.settings.autoRefresh.max); } }, fireImpression: function() { AdGlare.loadPixel(this.settings.impURL,'img'); }, iFrameResize: function() { var el = document.getElementById(AdGlareImageBanner_350700.ifrm_id); if(!el) return; var rect = el.getClientRects(); if(!rect[0]) return; var el_w = parseInt(rect[0].width); if(el_w==0) return; var maxh = Math.round(el_w / AdGlareImageBanner_350700.settings.width * AdGlareImageBanner_350700.settings.height*100)/100; if(maxh==0) return; el.style.maxHeight = maxh+'px'; } }
AdGlareImageBanner_350700.init(AdGlareSettings_350700);
